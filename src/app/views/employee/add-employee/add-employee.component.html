<div class="container-fluid">
  <div class="row">
    <div class="col-lg-12">
      <span>Register for example</span>
    </div>
    <div class="col-lg-12">
      <button *ngIf="flag" (click)="addUser()">Add User</button>
    </div>
  </div>
  <div class="row ml-3">
    <form [formGroup]="addInfForm">
      <div class="row">
        <div class="col-6">
          <div style="margin-top: 2px;">
            <label>First Name</label>
            <input
              type="text"
              class="form-control"
              maxlength="25"
              minlength="2"
              formControlName="fname"
            />

            <div>
              <ng-container *ngFor="let validation of validation_msg.fname">
                <div
                  class="error-message"
                  *ngIf="
                    addInfForm.get('fname')?.hasError(validation.type) &&
                    (addInfForm.get('fname')?.dirty ||
                      addInfForm.get('fname')?.touched)
                  "
                >
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </div>

          <div style="margin-top: 2px;">
            <label> Last Name</label>
            <input
              type="text"
              class="form-control"
              maxlength="25"
              minlength="2"
              formControlName="lname"
            />
            <div>
              <ng-container *ngFor="let validation of validation_msg.lname">
                <div
                  class="error-message"
                  *ngIf="
                    addInfForm.get('lname')?.hasError(validation.type) &&
                    (addInfForm.get('lname')?.dirty ||
                      addInfForm.get('lname')?.touched)
                  "
                >
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </div>
          <div style="margin-top: 2px;">
            <label> Email</label>
            <input
              type="text"
              class="form-control"
              maxlength="50"
              minlength="4"
              formControlName="email"
            />
            <div>
              <ng-container *ngFor="let validation of validation_msg.email">
                <div
                  class="error-message"
                  *ngIf="
                    addInfForm.get('email')?.hasError(validation.type) &&
                    (addInfForm.get('email')?.dirty ||
                      addInfForm.get('email')?.touched)
                  "
                >
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </div>
          <div style="margin-top: 2px;">
            <label> Phone</label>
            <input
              type="text"
              maxlength="10"
              minlength="10"
              class="form-control"
              formControlName="phone"
            />
            <div>
              <ng-container *ngFor="let validation of validation_msg.phone">
                <div
                  class="error-message"
                  *ngIf="
                    addInfForm.get('phone')?.hasError(validation.type) &&
                    (addInfForm.get('phone')?.dirty ||
                      addInfForm.get('phone')?.touched)
                  "
                >
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </div>
          <div style="margin-top: 2px;">
            <label> Gender</label>
            <input type="radio" value="male" formControlName="gender" /><label
              >Male</label
            >
            <input type="radio" value="female" formControlName="gender" /><label
              >Female</label
            >
          </div>
          <div>
            <ng-container *ngFor="let validation of validation_msg.gender">
              <div
                class="error-message"
                *ngIf="
                  addInfForm.get('gender')?.hasError(validation.type) &&
                  (addInfForm.get('gender')?.dirty ||
                    addInfForm.get('gender')?.touched)
                "
              >
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
        </div>
        <div class="col-6">
          <div style="margin-top: 2px;">
            <label> Company</label>
            <input
              type="text"
              class="form-control"
              maxlength="25"
              minlength="2"
              formControlName="company"
            />
            <div>
              <ng-container *ngFor="let validation of validation_msg.company">
                <div
                  class="error-message"
                  *ngIf="
                    addInfForm.get('company')?.hasError(validation.type) &&
                    (addInfForm.get('company')?.dirty ||
                      addInfForm.get('company')?.touched)
                  "
                >
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </div>
          <div style="margin-top: 2px;">
            <label> Birth Date </label>
            <input type="date" class="form-control" formControlName="dob" />
            <div>
              <ng-container *ngFor="let validation of validation_msg.dob">
                <div
                  class="error-message"
                  *ngIf="
                    addInfForm.get('dob')?.hasError(validation.type) &&
                    (addInfForm.get('dob')?.dirty ||
                      addInfForm.get('dob')?.touched)
                  "
                >
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </div>

          <div style="margin-top: 2px;">
            <label> Password</label>
            <input
              type="text"
              class="form-control"
              maxlength="16"
              minlength="2"
              formControlName="password"
            />
            <div>
              <ng-container *ngFor="let validation of validation_msg.password">
                <div
                  class="error-message"
                  *ngIf="
                    addInfForm.get('password')?.hasError(validation.type) &&
                    (addInfForm.get('password')?.dirty ||
                      addInfForm.get('password')?.touched)
                  "
                >
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </div>
          <div style="margin-top: 2px;">
            <label> Confirm Password</label>
            <input
              type="text"
              class="form-control"
              maxlength="16"
              minlength="2"
              formControlName="confirmPwd"
              (change)="checkPassword()"
            />
            <div>
              <ng-container
                *ngFor="let validation of validation_msg.confirmPwd"
              >
                <div
                  class="error-message"
                  *ngIf="
                    addInfForm.get('confirmPwd')?.hasError(validation.type) &&
                    (addInfForm.get('confirmPwd')?.dirty ||
                      addInfForm.get('confirmPwd')?.touched)
                  "
                >
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </div>
        </div>
      </div>

      <br />

      <button *ngIf="flag" (click)="submit()">Register</button>&nbsp; &nbsp;

      <button *ngIf="!flag" (click)="update()">Update</button>&nbsp; &nbsp;
      <button (click)="cancel()">Cancel</button>
    </form>
  </div>
</div>

<br />

<div>
  <table>
    <tr>
      <th>Sr No.</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Gender</th>
      <th>Company</th>
      <th>BirthDate</th>
      <th>Edit</th>
      <th>Delete</th>
    </tr>
    <tbody>
      <tr *ngFor="let item of infoList; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ item.firstname }}</td>
        <td>{{ item.lastname }}</td>
        <td>{{ item.email }}</td>
        <td>{{ item.phone }}</td>
        <td>{{ item.gender }}</td>
        <td>{{ item.company }}</td>
        <td>{{ item.birthdate | date: 'dd-MM-yyyy' }}</td>

        <td>
          <div>
            <button (click)="edit(item, i)">edit</button>
          </div>
        </td>
        <td>
          <div>
            <button (click)="delete(i)">delete</button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
